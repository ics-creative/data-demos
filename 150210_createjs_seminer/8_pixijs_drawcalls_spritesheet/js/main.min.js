var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},project;!function(a){var b,c=1,d=1,e=35,f=function(){function a(){var a=this;this.manifest=[{src:"http://clockmaker.jp/labs/150128_clock_webgl/img/more_complications_large_2x.png",id:"AppleWatch"}],this.fontList=["f001","f002","f003","f004","f005","f006","f007","f008","f009","f00a","f00b","f00c","f00d","f00e","f010","f011","f012","f013","f014","f015","f016","f017","f018","f019","f01a","f01b","f01c","f01d","f01e","f021","f022","f023","f024","f025","f026","f027","f028","f029","f02a","f02b","f02c","f02d","f02e","f02f","f030","f031","f032","f033","f034","f035","f036","f037","f038","f039","f03a","f03b","f03c","f03d","f03e","f040","f041","f042","f043","f044","f045","f046","f047","f048","f049","f04a"],WebFont.load({custom:{families:["FontAwesome"],urls:["//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"],testStrings:{FontAwesome:""}},active:function(){return a.handleFontDetect()}})}return a.prototype.handleFontDetect=function(){b=new createjs.LoadQueue(!0),b.on("complete",this.handleComplete,this),b.loadManifest(this.manifest)},a.prototype.handleComplete=function(){this.stage=new PIXI.Stage(15921906),this.renderer=PIXI.autoDetectRenderer(innerWidth,innerHeight,null,null,!0),this.container=new PIXI.DisplayObjectContainer;var a=new j(10),c=a.numItems;this.spriteSheetBuilder=new createjs.SpriteSheetBuilder,this.spriteSheetBuilder.padding=4,i.build(this.spriteSheetBuilder,c,this.fontList);var d=this.spriteSheetBuilder.addFrame(new createjs.Bitmap(b.getResult("AppleWatch")));this.spriteSheetBuilder.addAnimation("bg",[d]);var e=new createjs.Shape;e.graphics.beginFill("#000").drawRect(0,0,2,2);var d=this.spriteSheetBuilder.addFrame(e,new createjs.Rectangle(0,0,2,2));this.spriteSheetBuilder.addAnimation("black",[d]),this.spriteSheetBuilder.on("complete",this.handleBuildComplete,this),this.spriteSheetBuilder.buildAsync(.2)},a.prototype.handleBuildComplete=function(){var a=this;m.convertSpriteSheet(this.spriteSheetBuilder.spriteSheet);var b=PIXI.Sprite.fromFrame("bg");this.container.addChild(b),this.menu=new h,this.menu.x=211,this.menu.y=246,this.maskShape=new PIXI.Graphics,this.menu.mask=this.maskShape,this.container.addChild(this.menu),this.stage.addChild(this.container),this.menu.setup(),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.on("tick",this.handleTick,this),document.body.appendChild(this.renderer.view),this.handleResize(),window.addEventListener("resize",function(){return a.handleResize()})},a.prototype.handleTick=function(){this.renderer.render(this.stage)},a.prototype.handleResize=function(){var a=442,b=486;this.renderer.resize(innerWidth,innerHeight);var d=1;this.container.scale.x=this.container.scale.y=d,this.container.x=(window.innerWidth-a*d)/2,this.container.y=(window.innerHeight-b*d)/2,this.maskShape.clear(),this.maskShape.beginFill(16711680),this.maskShape.drawRect(this.container.x+this.menu.x-g.SIZE_W/2,this.container.y+this.menu.y-g.SIZE_H/2,g.SIZE_W,g.SIZE_H),c=d},a}();a.Main=f;var g=function(){function a(){}return a.SIZE_W=312,a.SIZE_H=400,a}(),h=function(a){function b(){a.call(this),this.mouseDownPoint=new PIXI.Point(0,0),this.mouseDownCenter=new PIXI.Point(0,0),this.easeCenter=new PIXI.Point(0,0),this.isDragging=!1}return __extends(b,a),b.prototype.setup=function(){var a=this,b=PIXI.Sprite.fromFrame("black");b.scale.x=g.SIZE_W/2,b.scale.y=g.SIZE_H/2,b.x=-g.SIZE_W/2>>0,b.y=-g.SIZE_H/2>>0,this.addChild(b),this.layoutManager=new j(10);var c=this.layoutManager.numItems;this.pointCurrent=new createjs.Point,this.listIcons=[];for(var d=0;c>d;d++){var f=PIXI.Sprite.fromFrame("icon_"+d);f.pivot.x=e,f.pivot.y=e,this.listIcons.push(f),this.addChild(f)}this.stage.mousedown=this.stage.touchstart=function(b){a.handleMouseDown(b)},this.stage.mousemove=this.stage.touchmove=function(b){a.handleMouseMove(b)},this.stage.mouseup=this.stage.mouseupoutside=this.stage.touchend=function(b){a.handleMouseUp(b)},createjs.Ticker.on("tick",this.handleTick,this)},b.prototype.handleMouseDown=function(a){this.mouseDownCenter.x=this.pointCurrent.x,this.mouseDownCenter.y=this.pointCurrent.y,this.mouseDownPoint=a.getLocalPosition(this),this.isDragging=!0},b.prototype.handleMouseMove=function(a){1==this.isDragging&&this.commitProperties(a)},b.prototype.handleMouseUp=function(a){this.commitProperties(a),this.isDragging=!1},b.prototype.commitProperties=function(a){var b=a.getLocalPosition(this);this.pointCurrent.x=b.x-this.mouseDownPoint.x+this.mouseDownCenter.x,this.pointCurrent.y=b.y-this.mouseDownPoint.y+this.mouseDownCenter.y,this.pointCurrent.x=Math.max(1.3*-g.SIZE_W*c,Math.min(1.3*+g.SIZE_W*c,this.pointCurrent.x)),this.pointCurrent.y=Math.max(-g.SIZE_H*c,Math.min(+g.SIZE_H*c,this.pointCurrent.y))},b.prototype.handleTick=function(){this.easeCenter.x+=.1*(this.pointCurrent.x-this.easeCenter.x),this.easeCenter.y+=.1*(this.pointCurrent.y-this.easeCenter.y),this.layoutManager.iconMapRefresh(150,55,{x:this.easeCenter.x/c,y:this.easeCenter.y/c},this.listIcons)},b}(PIXI.DisplayObjectContainer),i=function(){function a(){}return a.build=function(a,b,c){for(var f=[],g=0;b>g;g++){var h=c[g%c.length],i=new createjs.Container,j=360*Math.random(),k=new createjs.Shape,l=createjs.Graphics.getHSL(j,80,70),m=createjs.Graphics.getHSL(j,100,50);k.graphics.beginLinearGradientFill([l,m],[0,1],0,-e,0,+e).drawCircle(0,0,e),i.addChild(k);var n=String.fromCharCode(parseInt(h,16)),o=new createjs.Text(n,"42px FontAwesome","white");o.textAlign="center",o.textBaseline="middle",i.addChild(o),i.cache(-e,-e,2*e,2*e),f.push(i.cacheCanvas);var p=a.addFrame(i,null,d);a.addAnimation("icon_"+g,[p])}},a}(),j=function(){function a(a){this.screenW=g.SIZE_W,this.screenH=g.SIZE_H,this.centerW=this.screenW/2,this.centerH=this.screenH/2,this.hexCube=[];for(var b=0;a>b;b++)for(var c=-b;b>=c;c++)for(var d=-b;b>=d;d++)for(var e=-b;b>=e;e++)Math.abs(c)+Math.abs(d)+Math.abs(e)==2*b&&c+d+e==0&&this.hexCube.push([c,d,e])}return Object.defineProperty(a.prototype,"numItems",{get:function(){return this.hexCube.length},enumerable:!0,configurable:!0}),a.prototype.iconMapRefresh=function(a,b,c,e){for(var f=[],g=[],h=[],i=c.x,j=c.y,m=0;m<this.hexCube.length;m++)f[m]={x:(this.hexCube[m][1]+this.hexCube[m][0]/2)*b+i,y:Math.sqrt(3)/2*this.hexCube[m][0]*b+j,scale:0};for(var m=0;m<f.length;m++)g[m]=k.orthoToPolar(f[m].x,f[m].y);for(var m=0;m<g.length;m++){var n=g[m].radius/a;if(n<Math.PI/2)var o=g[m].radius*l.getValue(createjs.Ease.sineInOut,n/(Math.PI/2),1.5,-.5,1),p=l.getValue(createjs.Ease.cubicInOut,n/(Math.PI/2),1,-.5,1);else var o=g[m].radius,p=l.getValue(createjs.Ease.cubicInOut,1,1,-.5,1);h[m]={radius:o,depth:p,radian:g[m].radian}}for(var m=0;m<h.length;m++)f[m]=k.polarToOrtho(h[m].radius,h[m].radian);for(var m=0;m<f.length;m++)f[m].x=Math.round(10*f[m].x)/10,f[m].y=Math.round(10*f[m].y)/10*1.14;for(var q=24,m=0;m<f.length;m++)f[m].scale=Math.abs(f[m].x)>this.screenW/2-q||Math.abs(f[m].y)>this.screenH/2-q?.4*h[m].depth:Math.abs(f[m].x)>this.screenW/2-2*q&&Math.abs(f[m].y)>this.screenH/2-2*q?Math.min(h[m].depth*l.getValue(createjs.Ease.sineInOut,this.screenW/2-Math.abs(f[m].x)-q,.4,.6,q),h[m].depth*l.getValue(createjs.Ease.sineInOut,this.screenH/2-Math.abs(f[m].y)-q,.3,.7,q)):Math.abs(f[m].x)>this.screenW/2-2*q?h[m].depth*l.getValue(createjs.Ease.sineOut,this.screenW/2-Math.abs(f[m].x)-q,.4,.6,q):Math.abs(f[m].y)>this.screenH/2-2*q?h[m].depth*l.getValue(createjs.Ease.sineOut,this.screenH/2-Math.abs(f[m].y)-q,.4,.6,q):h[m].depth;for(var m=0;m<f.length;m++)f[m].x<-this.screenW/2+2*q?f[m].x+=l.getValue(createjs.Ease.sineIn,this.screenW/2-Math.abs(f[m].x)-2*q,0,6,2*q):f[m].x>this.screenW/2-2*q&&(f[m].x+=l.getValue(createjs.Ease.sineIn,this.screenW/2-Math.abs(f[m].x)-2*q,0,-6,2*q)),f[m].y<-this.screenH/2+2*q?f[m].y+=l.getValue(createjs.Ease.sineIn,this.screenH/2-Math.abs(f[m].y)-2*q,0,8,2*q):f[m].y>this.screenH/2-2*q&&(f[m].y+=l.getValue(createjs.Ease.sineIn,this.screenH/2-Math.abs(f[m].y)-2*q,0,-8,2*q));for(var m=0;m<e.length;m++){var r=e[m];r.x=f[m].x,r.y=f[m].y,r.scale.x=r.scale.y=f[m].scale/d}},a}(),k=function(){function a(){}return a.polarToOrtho=function(a,b){var c=a*Math.cos(b),d=a*Math.sin(b);return{x:c,y:d,scale:0}},a.orthoToPolar=function(a,b){var c=Math.sqrt(Math.pow(a,2)+Math.pow(b,2)),d=Math.atan2(b,a);return{radius:c,radian:d}},a}(),l=function(){function a(){}return a.getValue=function(a,b,c,d,e){return d*a(b/e)+c},a}(),m=function(){function a(){}return a.convertSpriteSheet=function(a){var b=PIXI.Texture.fromCanvas(a._images[0]);for(var c in a._data){var d=a.getAnimation(c),e=a.getFrame(d.frames[0]),f=new PIXI.Rectangle(e.rect.x,e.rect.y,e.rect.width,e.rect.height);PIXI.TextureCache[c]=new PIXI.Texture(b.baseTexture,f)}},a}()}(project||(project={})),window.addEventListener("load",function(){new project.Main});